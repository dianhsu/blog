---
title: Codeforces Round 791 (Div. 2)
categories: Codeforces
tags:
  - ç®—æ³•
  - Codeforces
  - äºŒåˆ†
  - çº¿æ®µæ ‘
  - æ ‘çŠ¶æ•°ç»„
  - æ‹“æ‰‘æ’åº
date: 2022-05-14 19:58:36
math: true
index_img: https://cdn.dianhsu.top/blog/202001020928102a9850b1f986bafdac953f2d6ed8208c.png.h700.webp
---

# A. AvtoBus
## é¢˜ç›®å¤§æ„
å·´å£«è½¦é˜Ÿçš„æ‰€æœ‰å·´å£«æ€»å…±æ‹¥æœ‰ $n$ åªè½®èƒï¼Œå·´å£«è½¦é˜Ÿæœ‰ä¸¤ç§å·´å£«ï¼Œä¸€ç§æ˜¯4åªè½®èƒçš„ï¼Œä¸€ç§æ˜¯6åªè½®èƒçš„ã€‚

é—®è¿™ä¸ªè½¦é˜Ÿæ‹¥æœ‰çš„å·´å£«æ•°é‡çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚ä¸æ»¡è¶³è¾“å‡º`-1`ã€‚

## é¢˜ç›®è§£æ
é¦–å…ˆåˆ¤æ–­æ˜¯å¦æ»¡è¶³ï¼Œå¯ä»¥è§‚å¯Ÿå‘ç°è½®å­æ•°é‡éœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š
- è½®å­æ•°é‡å¿…é¡»æ˜¯å¶æ•°
- è½®å­æ•°é‡ä¸å°äº$4$

**é¦–å…ˆæ¥è®¡ç®—æ»¡è¶³æ¡ä»¶çš„æœ€å¤§å€¼ã€‚** ä¸ºäº†èƒ½è®©å·´å£«è½¦é˜Ÿçš„å·´å£«æ•°ç›®æœ€å¤šï¼Œé‚£ä¹ˆè½®å­æ•°ç›®ä¸º$4$çš„å·´å£«è¶Šå¤šè¶Šå¥½ã€‚
$$
Cnt_{cars} = \frac{n}{4}
$$
å¦‚æœ$n \bmod 4 = 0$ï¼Œå°±åˆšå¥½èƒ½æ»¡è¶³æƒ…å†µã€‚
å¦‚æœ$n \bmod 4 = 2$ï¼Œé‚£ä¹ˆ $4$ åªè½®å­çš„å·´å£«æ•°ç›®æ˜¯ $\frac{n}{4} - 1$ ï¼Œ$6$ åªè½®å­çš„å·´å£«æ•°ç›®æ˜¯ $1$ ï¼Œå·´å£«æ€»æ•°æ˜¯ $\frac{n}{4}$ ã€‚

**ç„¶åæ¥è®¡ç®—æ»¡è¶³æ¡ä»¶çš„æœ€å°å€¼ã€‚** è¿™é‡Œæˆ‘ä»¬å¸Œæœ›è½®å­æ•°ç›®ä¸º6çš„å·´å£«æ•°ç›®è¶Šå¤šè¶Šå¥½ã€‚
$$
  Cnt_{cars} = \frac{n}{6}
$$
å¦‚æœ$n \bmod 6 = 0$ï¼Œé‚£ä¹ˆåˆšå¥½èƒ½å…¨éƒ¨éƒ½æ˜¯6ä¸ªè½®å­çš„å·´å£«ã€‚
å¦‚æœ$n \bmod 6 = 2$ï¼Œé‚£ä¹ˆ $6$ åªè½®å­çš„å·´å£«çš„æ•°ç›®æ˜¯ $\frac{n}{6} - 1$ ï¼Œ$4$ ä¸ªè½®å­çš„å·´å£«çš„æ•°ç›®æ˜¯ $2$ ï¼Œå·´å£«æ€»æ•°æ˜¯ $\frac{n}{6} + 1$ ã€‚
å¦‚æœ$n \bmod 6 = 4$ï¼Œé‚£ä¹ˆ $6$ åªè½®å­çš„å·´å£«çš„æ•°ç›®æ˜¯ $\frac{n}{6}$ï¼Œ$4$ åªè½®å­çš„å·´å£«æ•°ç›®æ˜¯ $1$ ï¼Œå·´å£«æ€»æ•°æ˜¯ $\frac{n}{6} + 1$ ã€‚

## å‚è€ƒä»£ç 
```cpp
int main() {
    int t;
    cin >> t;
    while(t--){
        ll n;
        cin >> n;
        if(n % 2 == 1 or n < 4) cout << "-1\n";
        else{
            ll maxv = n / 4;
            ll minv = n / 6;
            if(n % 6) minv++;
            cout << minv << " " << maxv << '\n';
        }
    }
    return 0;
}
```

# B. Stone Age Problem
## é¢˜ç›®å¤§æ„
å¯¹äºä¸€ä¸ªæ•°ç»„ï¼Œæœ‰ä¸¤ç§æ“ä½œæ–¹å¼ï¼š
- å°†ç¬¬ $i$ ä¸ªä½ç½®çš„å…ƒç´ ï¼Œä¿®æ”¹ä¸º $x$ã€‚
- å°†æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ ä¿®æ”¹ä¸º $x$ã€‚

å¯¹äºæ¯ä¸€æ¬¡æ“ä½œï¼Œè®¡ç®—æ•°ç»„ä¸­å…ƒç´ ä¹‹å’Œã€‚

## é¢˜ç›®è§£æ

å¯¹äºæ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®ï¼Œè®°å½•ä¸Šæ¬¡ä¿®æ”¹çš„æ—¶é—´å’Œå€¼ã€‚åŒæ—¶è®°å½•ä¸Šæ¬¡å…¨å±€ä¿®æ”¹çš„æ—¶é—´å’Œå€¼ã€‚

å¯¹äºæ“ä½œ1ï¼Œæ¯”è¾ƒ $i$ ä½ç½®ä¿®æ”¹çš„æ—¶é—´å’Œå…¨å±€ä¿®æ”¹çš„æ—¶é—´ï¼Œç„¶åé€‰æ‹©æœ€æ–°çš„å»è·å–å…ƒç´ å·®ï¼Œä»è€Œæ›´æ–°æ•°ç»„ä¸­å…ƒç´ ä¹‹å’Œã€‚

å¯¹äºæ“ä½œ2ï¼Œç›´æ¥ä¿®æ”¹å…¨å±€ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´å’Œå€¼ï¼Œå¹¶æ›´æ–°æ•°ç»„ä¸­å…ƒç´ ä¹‹å’Œã€‚

## å‚è€ƒä»£ç 
```cpp
int main() {
    int n, q;
    cin >> n >> q;
    PLL pre{-1, 0}; // ä¸Šæ¬¡å…¨å±€ä¿®æ”¹æ—¶é—´å’Œå€¼
    vector<PLL> arr(n + 1, {0, 0}); //ä¸Šæ¬¡æ¯ä¸ªä½ç½®ä¿®æ”¹çš„æ—¶é—´å’Œå€¼
    ll sum = 0;
    for(int i = 1; i <= n; ++i){
        cin >> arr[i].second;
        sum += arr[i].second;
    }
    ll opx = 0;
    while(q--){
        ++opx;
        int op;
        cin >> op;
        if(op == 1){
            int idx;
            ll val;
            cin >> idx >> val;
            if(pre.first > arr[idx].first){
                sum += val - pre.second;
            }else{
                sum += val - arr[idx].second;
            }
            arr[idx] = {opx, val};
        }else{
            ll val;
            cin >> val;
            sum = val * n;
            pre = {opx, val};
        }
        cout << sum << endl;
    }
    return 0;
}
```

# C. Rooks Defenders
## é¢˜ç›®å¤§æ„

ä½ æœ‰ä¸€ä¸ªæ£‹ç›˜ï¼Œæ£‹ç›˜å¤§å°æ˜¯ $n \times n$ã€‚
ç„¶åæœ‰ä¸‰ç§æ“ä½œï¼š
- å‘æ£‹ç›˜ä¸­ $(x, y)$ åæ ‡ä½ç½®æ”¾ç½®ä¸€æš`è½¦`ã€‚
- å°†æ£‹ç›˜ä¸­ $(x, y)$ åæ ‡ä½ç½®çš„`è½¦`ç§»é™¤ï¼Œä¿è¯è¿™ä¸ªåæ ‡ä½ç½®æœ‰ä¸€æš`è½¦`ã€‚
- ç»™ä½ ä¸€ä¸ªå­çŸ©å½¢ï¼ŒçŸ©å½¢ç”¨å·¦ä¸Šè§’åæ ‡ $(x_1, y_1)$ å’Œå³ä¸‹è§’åæ ‡ $(x_2, y_2)$ è¡¨ç¤ºã€‚é—®æ£‹ç›˜ä¸Šé¢çš„`è½¦`çš„ç§»åŠ¨èŒƒå›´èƒ½ä¸èƒ½æ”»å‡»åˆ°è¿™ä¸ªçŸ©å½¢å†…çš„æ‰€æœ‰ä½ç½®ã€‚

## é¢˜ç›®è§£æ

åˆ†åˆ«ç”¨æ•°ç»„è®°å½•æ¯ä¸€è¡Œå’Œæ¯ä¸€åˆ—ä¸€å…±æœ‰å¤šå°‘æš`è½¦`ã€‚
å½“æ¯ä¸€è¡Œï¼ˆåˆ—ï¼‰å‡ºç°ç¬¬ä¸€ä¸ª`è½¦`ï¼Œæˆ–è€…æœ€åä¸€æš`è½¦`æ¶ˆå¤±çš„æ—¶å€™ï¼Œå°†å½“å‰è¡Œï¼ˆåˆ—ï¼‰çš„`è½¦`æ•°ç›®æ›´æ–°åˆ°æ ‘çŠ¶æ•°ç»„æˆ–è€…çº¿æ®µæ ‘ã€‚
ç„¶åç»Ÿè®¡å­çŸ©é˜µæ‰€è¦†ç›–çš„è¡Œæ˜¯ä¸æ˜¯å…¨éƒ¨èƒ½è¢«`è½¦`è¦†ç›–åˆ° æˆ–è€… æ¯ä¸€åˆ—éƒ½èƒ½è¢« `è½¦` è¦†ç›–åˆ°ã€‚

## å‚è€ƒä»£ç 
```cpp
template<typename T>
struct FenWick {
    int N;
    vector<T> arr;
    FenWick(int sz): N(sz), arr(sz + 1, 0) {}
    void update(int pos, T val) {
        for (; pos <= N;pos |= (pos + 1)) {
            arr[pos] += val;
        }
    }
    // è·å– [1, pos] çš„å’Œ
    T get(int pos) {
        T ret = 0;
        for (; pos > 0; --pos) {
            ret += arr[pos];
            pos &= (pos + 1);
        }
        return ret;
    }
    // è·å– [l, r] çš„å’Œ
    T query(int l, int r) {
        return get(r) - get(l - 1);
    }
};
int main() {
    fastIO();
    int n, q;
    cin >> n >> q;
    FenWick<int> fwr(n), fwc(n);
    vector<int> r(n + 1, 0), c(n + 1, 0);
    while(q--){
        int op;
        cin >> op;
        if(op == 1){
            int x, y;
            cin >> x >> y;
            r[x]++;
            c[y]++;
            if(r[x] == 1) fwr.update(x, 1);   // å½“ ğŸš— å‡ºç°çš„æ—¶å€™
            if(c[y] == 1) fwc.update(y, 1);   // å½“ ğŸš— å‡ºç°çš„æ—¶å€™
        }else if(op == 2){
            int x, y;
            cin >> x >> y;
            r[x]--;
            c[y]--;
            if(r[x] == 0) fwr.update(x, -1);  // å½“ ğŸš— æ¶ˆå¤±çš„æ—¶å€™
            if(c[y] == 0) fwc.update(y, -1);  // å½“ ğŸš— æ¶ˆå¤±çš„æ—¶å€™
        }else{
            int x1, y1, x2, y2;
            cin >> x1 >> y1 >> x2 >> y2;
            if(fwr.query(x1, x2) == x2 - x1 + 1 or fwc.query(y1, y2) == y2 - y1 + 1){
                cout << "Yes\n";
            }else{
                cout << "No\n";
            }
        }
    }
    return 0;
}
```

# D. Toss a Coin to Your Graph...
## é¢˜ç›®å¤§æ„

æœ‰ä¸€ä¸ªä¸åŒ…å«è‡ªç¯çš„æœ‰å‘å›¾ï¼Œå›¾ä¸Šçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ‹¥æœ‰ä¸€ä¸ªæƒå€¼ $a_i$ï¼Œé—®ä½ ä»æŸä¸ªèŠ‚ç‚¹å‡ºå‘ï¼Œç»è¿‡ $k - 1$ æ¡å•å‘è¾¹ï¼Œç»è¿‡çš„æ‰€æœ‰èŠ‚ç‚¹çš„æœ€å¤§å€¼æœ€å°ã€‚

## é¢˜ç›®è§£æ

äºŒåˆ†ä¸€ä¸‹æœ€å¤§å€¼ $a_{max}$ï¼Œç„¶ååˆ¤æ–­åœ¨ä¸ç»è¿‡æƒå€¼è¶…è¿‡æœ€å¤§å€¼çš„èŠ‚ç‚¹æƒ…å†µä¸‹ï¼Œèƒ½ä¸èƒ½æ»¡è¶³ç»è¿‡ $k - 1$ æ¡å•å‘éã€‚

å¯¹äºæ¯æ¬¡ä¸€æ¬¡äºŒåˆ†æšä¸¾ $a_{max}$ ï¼Œå°†æƒå€¼è¶…è¿‡ $a_{max}$ çš„ç‚¹å’Œä¸å®ƒç›¸è¿çš„è¾¹ç§»é™¤ï¼Œåˆ¤æ–­å‰©ä½™çš„å›¾å½¢æ˜¯å¦å­˜åœ¨èŠ‚ç‚¹æ•°å¤§äºæˆ–è€…ç­‰äº$k$çš„é“¾ï¼Œæˆ–è€…å­˜åœ¨ç¯ã€‚è¿™ä¸ªå¯ä»¥ç”¨æ‹“æ‰‘æ’åºè§£å†³ä¸€ä¸‹ã€‚

## å‚è€ƒä»£ç 
```cpp
struct Node{
    int a, b;
    int val;
    bool operator < (const Node& arg) const{
        return val < arg.val;
    }
};
int main() {
    fastIO();
    int n, m;
    ll k;
    cin >> n >> m >> k;
    vector<PLL> arr(n);
    for(int i = 0; i < n; ++i){
        cin >> arr[i].first;
        arr[i].second = i;
    }
    vector<Node> nodes(m);
    for(auto& it: nodes){
        cin >> it.a >> it.b;
        it.a--;
        it.b--;
        it.val = max(arr[it.a].first, arr[it.b].first); //è¾¹çš„æƒå€¼è®¾å®šä¸ºä¸¤ä¸ªç«¯ç‚¹çš„æœ€å¤§å€¼
    }
    sort(itr(nodes));
    sort(itr(arr));
    // äºŒåˆ†çš„æ£€æŸ¥å‡½æ•°ï¼Œæ£€æŸ¥å–æœ€å°çš„cntä¸ªå…ƒç´ çš„æƒ…å†µä¸‹æ˜¯å¦æ»¡è¶³
    auto&& check = [&](int cnt) -> bool{
        vector<int> vis(n, 0);
        vector<vector<int>> g(n); //å›¾
        vector<int> ins(n, 0);  //æœ‰å‘å›¾å…¥åº¦
        vector<int> dep(n, 1);  //åŒ…å«å½“å‰ä½ç½®çš„é“¾çš„èŠ‚ç‚¹æ•°ç›®
        for(int i = 0; i < m; ++i){
            if(nodes[i].val <= arr[cnt - 1].first){
                g[nodes[i].a].push_back(nodes[i].b);
                ins[nodes[i].b]++;
            }else{
                break;
            }
        }
        queue<int> q;
        for(int i = 0; i < n; ++i){
            if(ins[i] == 0){
                q.push(i);
                vis[i] = 1;
            }
        }
        while(!q.empty()){
            auto it = q.front();
            q.pop();
            for(auto& nex: g[it]){
                ins[nex]--;
                dep[nex] = max(dep[nex], dep[it] + 1);
                if(ins[nex] == 0){
                    q.push(nex);
                    vis[nex] = 1;
                }
            }
        }
 
        for(int i = 0; i < n; ++i) if(ins[i]) return true;  // å­˜åœ¨ç¯
        for(int i = 0; i < n; ++i) if(dep[i] >= k) return true; // é“¾çš„èŠ‚ç‚¹æ•°ç›®è¶…è¿‡k
        return false;
    };
    int ans = n + 1;
    for(int i = (1 << 20); i; i >>= 1){
        if(ans - i > 0 and check(ans - i)) ans -= i;
    }
    if(ans > n) cout << -1 << endl;
    else cout << arr[ans - 1].first << endl;
    return 0;
}
```